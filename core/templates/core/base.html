{% extends 'directory_components/base.html' %}
{% load static %}
{% load static_absolute from directory_components %}

{% block head_title %}Welcome to great.gov.uk{% endblock %}

{% block head_js %}
  <script src="{% static 'directory_components/js/vendor/jquery-3.3.1.min.js' %}"></script>
  <script src="{% static 'js/dit.js' %}"></script>
  <script src="{% static 'directory_components/js/dit.components.cookie-notice.js' %}"></script>
{% endblock %}

{% block head_other %}
    {% include 'core/browser-checks.html' %}
{% endblock %}

{% block head_js_ga360 %}
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
  </script>
  {% if ga360 %}
    <script src="{% static 'js/dit.tagging.js' %}"></script>
    <script id="ga360-script">
      window.dataLayer.push({
        {% if ga360.page_id == 'TopicLandingPage' %}
        'pageCategory': '{{ ga360.site_subsection }}LandingPage',
        {% else %}
        'pageCategory': '{{ ga360.page_id }}',
        {% endif %}
        'site_section': '{{ ga360.site_section }}',
        'site_subsection': '{{ ga360.site_subsection }}',
        'businessUnit': '{{ ga360.business_unit }}',
        'siteLanguage': '{{ ga360.site_language }}',
        'userID': '{{ ga360.user_id }}',
        'loginStatus': '{{ ga360.login_status }}',
      });

      dit.tagging.domestic.init(
        {% if ga360.page_id == 'TopicLandingPage' %}
        '{{ ga360.site_subsection }}LandingPage',
        {% else %}
        '{{ ga360.page_id }}',
        {% endif %}
      );
    </script>
  {% endif %}
{% endblock %}

{% block head_sharing_metadata %}
  {% if request %}
    {% if page.hero_image %}
      <meta property="og:image" content="{{ page.hero_image.url }}">
    {% else %}
      <meta property="og:image" content="{% block og_image %}{% static_absolute 'directory_components/images/opengraph-image.png' %}{% endblock %}">
    {% endif %}
    <meta property="og:url" content="{{ request.build_absolute_uri }}" />
  {% endif %}

  {% if page.search_description or page.seo_title %}
    <meta name="description" content="{{ page.search_description|default:page.seo_title }}">
  {% else %}
    <meta name="description" content="{% block meta_description %}{% endblock %}">
  {% endif %}

{% endblock %}
