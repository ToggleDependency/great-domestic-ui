{% extends "core/base.html" %}

{% load static from staticfiles %}

{% block head_css %}
    {{ block.super }}
    <link href="{% static 'styles/custom-page.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'js/vendor/accessible-autocomplete.min.css' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block sharing_metadata %}{% endblock %}

{% block head_title %}
    Your export journey - great.gov.uk
{% endblock %}

{% block content %}

<section style="" class="hero-section {% if persona.name == 'NEW_EXPORTER' %}new{% elif persona.name == 'OCCASIONAL_EXPORTER' %}occasional{% elif persona.name == 'REGULAR_EXPORTER'%}regular{% endif %}">
  <div class="container">
    <div class="hero-teaser">
      <h1 class="title heading-xlarge">Your Export Journey</h1>
    </div>
  </div>
</section>

<div class="container">
    <p class="breadcrumbs">
      <span class="label visually-hidden">You are here:</span>
      <a href="{% url 'landing-page' %}">Great.gov.uk</a>
      <span class="visually-hidden separator">,</span>
      <span class="current">Your export journey</span>
    </p>
</div>

<section class="intro-section">
  <div class="container">
    <div class="grid-row">
      <div class="column-half">

        {% if persona.name == 'REGULAR_EXPORTER'%}
          <h2 class="heading-large">Connect with international buyers</h2>
          <p>Increase your exporting knowledge and start connecting with overseas buyers.</p>
        {% else %}
          <h2 class="heading-large">Explore new markets</h2>
          <p>Learn about the best markets for your sector, increase your exporting knowledge and start connecting with overseas buyers.</p>
        {% endif %}

        {% if not sso_is_logged_in %}
          <p><a class="link" href="{{ sso_register_url }}">Register</a> or <a class="link" href="{{ sso_login_url }}">sign in</a> to save your custom profile.</p>
        {% endif %}
      </div>
      <div class="column-half">
        <a href="{% url 'triage-wizard' step='summary' %}?result" class="preferences">Update preferences</a>
      </div>
    </div>
  </div>
</section>

{% if triage_result.is_exporting_goods %}
  {% include 'triage/sections/sector.html' %}
{% endif %}

{% if section_configuration.persona_article_group %}
  {% include 'triage/sections/article_list.html' %}
{% endif %}

{% if section_configuration.trade_profile %}
  {% include 'triage/sections/fab.html' %}
{% endif %}

{% if section_configuration.selling_online_overseas_and_export_opportunities %}
  {% include 'triage/sections/soo_exopps.html' %}
{% endif %}

{% if section_configuration.selling_online_overseas %}
  {% include 'triage/sections/soo.html' %}
{% endif %}

{% if section_configuration.articles_resources %}
    {% include 'core/guidance-resources.html' %}
{% endif %}

{% if section_configuration.case_studies %}
<section id="carousel">
    {% include 'casestudy/carousel.html' %}
</section>
{% endif %}

{% endblock %}


{% block body_js %}
    {% if section_configuration.persona_article_group %}
        <script src="{% static 'js/article-list.js' %}"></script>
        <script>
            var listElement = document.getElementById('js-paginate-list');
            var loadMoreButton = document.getElementById('js-paginate-list-more');
            new GOVUK.components.ArticlePaginator(listElement, loadMoreButton);
        </script>
    {% endif %}
    <script src="{% static 'js/vendor/accessible-autocomplete.min.js' %}"></script>
    <script src="{% static 'js/article-list.js' %}"></script>
    <script>
        accessibleAutocomplete.enhanceSelectElement({
          selectElement: document.getElementById('js-sector-select'),
          defaultValue: '',
          autoselect: false,
          showAllValues: false,
          placeholder: 'Type here',
          minLength: 2
        })
        var listElement = document.getElementById('js-paginate-table');
        var loadMoreButton = document.getElementById('js-paginate-table-more');
        // Avoid error when user hasn't selected a sector
        if (listElement && loadMoreButton) {
          new GOVUK.components.ArticlePaginator(listElement, loadMoreButton);
        }
    </script>
{% endblock %}
